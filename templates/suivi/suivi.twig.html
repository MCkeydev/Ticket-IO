{% extends 'navbarBase/navbarBase.html.twig' %}

{% block stylesheets %}
{{ parent() }}
{% endblock %}

{% block javascripts %}
{{ parent() }}
{% endblock %}

{% block body %}
<div class='flex-container suivi-container'>
    <h1 class='section-header'>
        Suivi du ticket
    </h1>
    <div class='ticket'>
        <div class="ticket-meta">
            {{ component('avatar', { user: ticket.operateur }) }}
            <div class="ticket-header">
                <h1 class="ticket-titre">{{ ticket.titre|capitalize }} </h1>
                {{ component('statusChip') }}
            </div>
        </div>
        <p class="ticket-description">{{ ticket.description }}</p>
        <div class='ticket-date'>
            <span>
                Crée le {{ ticket.createdAt | date('d-m-Y') }}  à {{ ticket.createdAt | date('H:i') }}
            </span>
            <span>
                Pour {{ ticket.getClient().getNom() }}  {{ ticket.getClient().getPrenom() }}
            </span>
        </div>
    </div>
    <div class="update-ticket-container">
        <!-- Nous bouclons sur la collection de commentaires correspondant au ticket -->
        {% for comments in commentaires %}
            <li class='comment-container ticket' >
                {{ component('avatar', { user: comments.auteur }) }}
                <div class="commentaire-content">
                    <div style="display: flex; align-items: center; column-gap: 16px;">
                        {{ component('statusChip', { type: 'commentaire' })}}
                        <p> publié par {{ comments.auteur.nom }} {{ comments.auteur.prenom }}</p>
                        <p>le {{ comments.createdAt | date('d-m-Y') }} à {{ comments.createdAt | date('H:i') }}</p>
                    </div>
                    <p class="ticket-description">{{ comments.commentaire }}</p>
                </div>
            </li>
        {% endfor %}
    </div>
</div>
{% endblock %}